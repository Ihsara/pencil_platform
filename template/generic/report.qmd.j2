---
title: "Analysis Report for {{ experiment_name }}"
author: "Automated Analysis Pipeline"
format: 
  html:
    toc: true
    code-fold: true
    self-contained: true
execute:
  echo: false
  warning: false
---

## Experiment Overview

This report details the analysis of the **{{ experiment_name }}** simulation suite.

### Side-by-Side Numerical Error Analysis

The table below provides a side-by-side comparison of the Mean Squared Error (MSE) for each simulation run against the analytical solution. Lower values indicate a better match.

```{python}
#| label: analysis-comparison
#| echo: true

# Load the pre-generated comparison table
with open("comparison_summary.md", 'r') as f:
    print(f.read())

```

---

## Individual Run Visualizations

The following sections show the final simulation profiles (blue lines) compared against the analytical solution (dashed black lines) for each run.

```{python}
#| label: setup
#| include: false
import matplotlib.pyplot as plt
from pathlib import Path
from IPython.display import Image, display

# Configure plotting style
plt.style.use('seaborn-v0_8-whitegrid')
```

{% for run_name in run_names %}
### Run: `{{ run_name }}`

```{python}
#| label: plots-{{ run_name }}
#| fig-cap: "Comparison plots for {{ run_name }}."
#| layout-ncol: 2

plot_dir = Path("{{ run_name }}")
if plot_dir.exists():
    display(Image(filename=plot_dir / 'density.png'))
    display(Image(filename=plot_dir / 'velocity.png'))
    display(Image(filename=plot_dir / 'pressure.png'))
    display(Image(filename=plot_dir / 'energy.png'))
else:
    print(f"Plot directory for {{ run_name }} not found.")

```
---
{% endfor %}
